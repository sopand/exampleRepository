# Secure Cookie 

## Cookie란
> - 서버가 사용자의 웹 브라우저에 전송하는 작은 데이터 조각 
>   - 브라우저는 그 데이터 조각들을 저장해 놓았다가, 동일한 서버에 재요청시 저장된 데이터를 함께 전송한다.
>   - 쿠키는 두 요청이 동일한 브라우저에서 들어왔는지 아닌지를 판단할 때 주로 사용한다.
>     - 이를 이용하면 사용자의 로그인 상태를 유지할 수 있다.
>       - 상태가 없는 HTTP 프로토콜에서 상태 정보를 기억시켜 주기 때문
## Cookie의 사용처
> - 세션관리
>   - 서버에 저장해야 할 로그인, 장바구니 등의 정보를 관리
> - 개인화
>   - 사용자 선호, 테마 등의 세팅
> - 트래킹
>   - 사용자의 행동을 기록하고 분석하는 용도

## Cookie의 특징
> - HTTP 통신을 한다면 쿠키를 주고 받을 수 있다.
> - 같은 도메인이라면 Header에 자동으로 쿠키가 담겨서 보내진다.
>   - 같은 도메인이라면 다른 Scheme일지라도 쿠키를 공유가능
> - 서버에서도,클라이언트에서도 생성/접근/관리 할 수 있다.
> - HTTP와 HTTPS 사이에도 쿠키를 교환할 수 있다.
>   - Secure 접미사를 사용하면 HTTPS 에서만 쿠키를 전송하도록 설정할 수 있다.


## 쿠키의 라이프타임
> - 세션 쿠키 (Session Cookie)
>   - Expires(유효 일자)나 Max-Age(만료 기간) 옵션이 지정되어있지 않아 브라우저가 닫힐때 함꼐 삭제
> - 영속적인 쿠키
>   - Expires 속성에 명시된 날짜에 삭제되거나,Max-Age 속성에 명시된 기간 이후에 삭제된다
>   - 브라우저를 닫아도 쿠키가 삭제되지 않음

## HttpOnly , Secure Cookie
> - HttpOnly
>   - HttpOnly 쿠키 속성을 사용하면 JavaScript를 통해 쿠키에 접근할 수 없게되어,
> 악성 스크립트를 통해 쿠키값에 접근하는 것을 막을 수 있다.
>   - 쿠키를 생성 시 마지막에 HttpOnly라는 접미사를 추가하면 된다.
> - Secure Cookie
>   - HTTP Only Cookie를 사용하면, Client에서 JavaScript를 통한 쿠키 탈취 문제를 예방 할 수 있다.
>   - 하지만 JavaScript가 아닌 네트워크를 감청하여 쿠키를 가로챌 수있다.
>   - 이러한 정보 유출을 막기 위해 , HTTPS 프로토콜을 사용하여 데이터를 암호화하여 서버에 넘겨주게 되면,
> 쿠키를 탈취해도 암호화가 되어있어 정보를 알아낼 수 없다.
>   - 이를 위해 Secure 접미사를 사용하여 쿠키를 생성하면 브라우저는 HTTPS가 아닌 통신에서는 쿠키를 전송하지 않는다.

